!function(a,b,c,d,e,f,g,h,i,j,k){function l(a){var b;if(m.future.inheritance)for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);else db(this,a)}function m(a){var b;if(a)db(cb,a);else for(b in cb)cb.hasOwnProperty(b)&&delete cb[b];return g&&g.warn&&!sb.jCanvas&&(sb.jCanvas=h,g.warn("The jCanvas() method has been deprecated and will be removed in a future release.")),this}function n(){}function o(a){return"string"===fb(a)}function p(a){return a&&a.getContext?a.getContext("2d"):j}function q(a){return a=db({},a),a.masks=a.masks.slice(0),a}function r(a,b){var c;a.save(),c=q(b.transforms),b.savedTransforms.push(c)}function s(a,b,c,d){c[d]&&(b[d]=gb(c[d])?c[d].call(a,c):c[d])}function t(a,b,c){s(a,b,c,"fillStyle"),s(a,b,c,"strokeStyle"),b.lineWidth=c.strokeWidth,c.rounded?b.lineCap=b.lineJoin="round":(b.lineCap=c.strokeCap,b.lineJoin=c.strokeJoin,b.miterLimit=c.miterLimit),b.shadowOffsetX=c.shadowX,b.shadowOffsetY=c.shadowY,b.shadowBlur=c.shadowBlur,b.shadowColor=c.shadowColor,b.globalAlpha=c.opacity,b.globalCompositeOperation=c.compositing,c.imageSmoothing&&(b.webkitImageSmoothingEnabled=b.mozImageSmoothingEnabled=c.imageSmoothing)}function u(a,b,c){c.mask&&(c.autosave&&r(a,b),a.clip(),b.transforms.masks.push(c._args))}function v(a,b,c){c.closed&&b.closePath(),c.shadowStroke&&0!==c.strokeWidth?(b.stroke(),b.fill(),b.shadowColor="transparent",b.shadowBlur=0,b.stroke()):(b.fill(),"transparent"!==c.fillStyle&&(b.shadowColor="transparent"),0!==c.strokeWidth&&b.stroke()),c.closed||b.closePath(),c._transformed&&b.restore(),c.mask&&(a=A(a),u(b,a,c))}function w(a,b,c){b._toRad=b.inDegrees?hb/180:1,a.translate(b.x,b.y),a.rotate(b.rotate*b._toRad),a.translate(-b.x,-b.y),c&&(c.rotate+=b.rotate*b._toRad)}function x(a,b,c){1!==b.scale&&(b.scaleX=b.scaleY=b.scale),a.translate(b.x,b.y),a.scale(b.scaleX,b.scaleY),a.translate(-b.x,-b.y),c&&(c.scaleX*=b.scaleX,c.scaleY*=b.scaleY)}function y(a,b,c){b.translate&&(b.translateX=b.translateY=b.translate),a.translate(b.translateX,b.translateY),c&&(c.translateX+=b.translateX,c.translateY+=b.translateY)}function z(a,b,c,d,e){c._toRad=c.inDegrees?hb/180:1,c._transformed=h,b.save(),c.fromCenter||c._centered||d===k||(e===k&&(e=d),c.x+=d/2,c.y+=e/2,c._centered=h),c.rotate&&w(b,c,j),1===c.scale&&1===c.scaleX&&1===c.scaleY||x(b,c,j),(c.translate||c.translateX||c.translateY)&&y(b,c,j)}function A(b){var c,d=qb.dataCache;return d._canvas===b&&d._data?c=d._data:(c=a.data(b,"jCanvas"),c||(c={canvas:b,layers:[],layer:{names:{},groups:{}},eventHooks:{},intersecting:[],lastIntersected:j,cursor:a(b).css("cursor"),drag:{layer:j,dragging:i},event:{type:j,x:j,y:j},events:{},transforms:q(rb),savedTransforms:[],animating:i,animated:j,pixelRatio:1,scaled:i},a.data(b,"jCanvas",c)),d._canvas=b,d._data=c),c}function B(a,b,c){for(var d in m.events)m.events.hasOwnProperty(d)&&(c[d]||c.cursors&&c.cursors[d])&&C(a,b,c,d)}function C(a,b,c,d){window.ontouchstart!==k&&pb.touchEvents[d]&&(d=pb.touchEvents[d]),m.events[d](a,b),c._event=h}function D(a,b,c){var d,e,f;if(c.draggable||c.cursors){for(d=["mousedown","mousemove","mouseup"],f=0;f<d.length;f+=1)e=d[f],C(a,b,c,e);b.events.mouseoutdrag||(a.bind("mouseout.jCanvas",function(){var c=b.drag.layer;c&&(b.drag={},H(a,b,c,"dragcancel"),a.drawLayers())}),b.events.mouseoutdrag=h),c._event=h}}function E(a,b,c,d){a=b.layer.names,d?d.name!==k&&o(c.name)&&c.name!==d.name&&delete a[c.name]:d=c,o(d.name)&&(a[d.name]=c)}function F(a,b,c,d){a=b.layer.groups;var e,f,g,h;if(d){if(d.groups!==k&&c.groups!==j)for(f=0;f<c.groups.length;f+=1)if(e=c.groups[f],b=a[e]){for(h=0;h<b.length;h+=1)if(b[h]===c){g=h,b.splice(h,1);break}0===b.length&&delete a[e]}}else d=c;if(d.groups!==k&&d.groups!==j)for(f=0;f<d.groups.length;f+=1)e=d.groups[f],b=a[e],b||(b=a[e]=[],b.name=e),g===k&&(g=b.length),b.splice(g,0,c)}function G(a,b,c,d,e){d[c]&&b._running&&!b._running[c]&&(b._running[c]=h,d[c].call(a[0],b,e),b._running[c]=i)}function H(b,c,d,e,f){if(!d.disableEvents){if("mouseout"!==e){var g;d.cursors&&(g=d.cursors[e]),-1!==a.inArray(g,tb.cursors)&&(g=tb.prefix+g),g&&b.css({cursor:g})}G(b,d,e,d,f),G(b,d,e,c.eventHooks,f),G(b,d,e,m.eventHooks,f)}}function I(b,c,d,e){var f,g=c._layer?d:c;return c._args=d,(c.draggable||c.dragGroups)&&(c.layer=h,c.draggable=h),c._method=e?e:c.method?a.fn[c.method]:c.type?a.fn[pb.drawings[c.type]]:function(){},c.layer&&!c._layer&&(d=a(b),e=A(b),f=e.layers,g.name===j||o(g.name)&&e.layer.names[g.name]===k)&&(g=new l(c),g.canvas=b,g.$canvas=a(b),g.layer=h,g._layer=h,g._running={},g.data=g.data!==j?db({},g.data):{},g.groups=g.groups!==j?g.groups.slice(0):[],E(d,e,g),F(d,e,g),B(d,e,g),D(d,e,g),c._event=g._event,g._method===a.fn.drawText&&d.measureText(g),g.index===j&&(g.index=f.length),f.splice(g.index,0,g),c._args=g,H(d,e,g,"add")),g}function J(a,b){var c,d;for(d=0;d<tb.props.length;d+=1)c=tb.props[d],a[c]!==k&&(a["_"+c]=a[c],tb.propsObj[c]=h,b&&delete a[c])}function K(a,b,c){var d,e,f,g;for(d in c)if(c.hasOwnProperty(d)&&(e=c[d],gb(e)&&(c[d]=e.call(a,b,d)),"object"===fb(e))){for(f in e)e.hasOwnProperty(f)&&(g=e[f],b[d]!==k&&(b[d+"."+f]=b[d][f],c[d+"."+f]=g));delete c[d]}return c}function L(c){var d,e,g=[],h=1;return c.match(/^([a-z]+|#[0-9a-f]+)$/gi)&&("transparent"===c&&(c="rgba(0,0,0,0)"),e=b.head,d=e.style.color,e.style.color=c,c=a.css(e,"color"),e.style.color=d),c.match(/^rgb/gi)&&(g=c.match(/(\d+(\.\d+)?)/gi),c.match(/%/gi)&&(h=2.55),g[0]*=h,g[1]*=h,g[2]*=h,g[3]=g[3]!==k?f(g[3]):1),g}function M(a){var b,c=3;for("array"!==fb(a.start)&&(a.start=L(a.start),a.end=L(a.end)),a.now=[],(1!==a.start[3]||1!==a.end[3])&&(c=4),b=0;c>b;b+=1)a.now[b]=a.start[b]+(a.end[b]-a.start[b])*a.pos,3>b&&(a.now[b]=ib(a.now[b]));1!==a.start[3]||1!==a.end[3]?a.now="rgba("+a.now.join(",")+")":(a.now.slice(0,3),a.now="rgb("+a.now.join(",")+")"),a.elem.nodeName?a.elem.style[a.prop]=a.now:a.elem[a.prop]=a.now}function N(a){m.events[a]=function(b,c){var d,e;e=c.event,d="mouseover"===a||"mouseout"===a?"mousemove":a,c.events[d]||(b.bind(d+".jCanvas",function(a){e.x=a.offsetX,e.y=a.offsetY,e.type=d,e.event=a,b.drawLayers({resetFire:h}),a.preventDefault()}),c.events[d]=h)}}function O(a,b,c){var d,e,f,g;(c=c._args)&&(a=A(a),d=a.event,d.x!==j&&d.y!==j&&(f=d.x*a.pixelRatio,g=d.y*a.pixelRatio,e=b.isPointInPath(f,g)||b.isPointInStroke&&b.isPointInStroke(f,g)),b=a.transforms,c.eventX=c.mouseX=d.x,c.eventY=c.mouseY=d.y,c.event=d.event,d=a.transforms.rotate,f=c.eventX,g=c.eventY,0!==d?(c._eventX=f*lb(-d)-g*kb(-d),c._eventY=g*lb(-d)+f*kb(-d)):(c._eventX=f,c._eventY=g),c._eventX/=b.scaleX,c._eventY/=b.scaleY,e&&a.intersecting.push(c),c.intersects=e)}function P(a){for(;0>a;)a+=2*hb;return a}function Q(a,b,c,d){var e,f,g,h,i,j,k;c===d?k=j=0:(j=c.x,k=c.y),d.inDegrees||360!==d.end||(d.end=2*hb),d.start*=c._toRad,d.end*=c._toRad,d.start-=hb/2,d.end-=hb/2,i=hb/180*1,d.ccw&&(i*=-1),e=d.x+d.radius*lb(d.start+i),f=d.y+d.radius*kb(d.start+i),g=d.x+d.radius*lb(d.start),h=d.y+d.radius*kb(d.start),S(a,b,c,d,e,f,g,h),b.arc(d.x+j,d.y+k,d.radius,d.start,d.end,d.ccw),e=d.x+d.radius*lb(d.end+i),i=d.y+d.radius*kb(d.end+i),f=d.x+d.radius*lb(d.end),g=d.y+d.radius*kb(d.end),T(a,b,c,d,f,g,e,i)}function R(a,b,c,d,e,f,g,h){var i,j;d.arrowRadius&&!c.closed&&(j=mb(h-f,g-e),j-=hb,a=c.strokeWidth*lb(j),i=c.strokeWidth*kb(j),c=g+d.arrowRadius*lb(j+d.arrowAngle/2),e=h+d.arrowRadius*kb(j+d.arrowAngle/2),f=g+d.arrowRadius*lb(j-d.arrowAngle/2),d=h+d.arrowRadius*kb(j-d.arrowAngle/2),b.moveTo(c-a,e-i),b.lineTo(g-a,h-i),b.lineTo(f-a,d-i),b.moveTo(g-a,h-i),b.lineTo(g+a,h+i),b.moveTo(g,h))}function S(a,b,c,d,e,f,g,i){d._arrowAngleConverted||(d.arrowAngle*=c._toRad,d._arrowAngleConverted=h),d.startArrow&&R(a,b,c,d,e,f,g,i)}function T(a,b,c,d,e,f,g,i){d._arrowAngleConverted||(d.arrowAngle*=c._toRad,d._arrowAngleConverted=h),d.endArrow&&R(a,b,c,d,e,f,g,i)}function U(a,b,c,d){var e,f,g;for(e=2,S(a,b,c,d,d.x2+c.x,d.y2+c.y,d.x1+c.x,d.y1+c.y),d.x1!==k&&d.y1!==k&&b.moveTo(d.x1+c.x,d.y1+c.y);h&&(f=d["x"+e],g=d["y"+e],f!==k&&g!==k);)b.lineTo(f+c.x,g+c.y),e+=1;e-=1,T(a,b,c,d,d["x"+(e-1)]+c.x,d["y"+(e-1)]+c.y,d["x"+e]+c.x,d["y"+e]+c.y)}function V(a,b,c,d){var e,f,g,i,j;for(e=2,S(a,b,c,d,d.cx1+c.x,d.cy1+c.y,d.x1+c.x,d.y1+c.y),d.x1!==k&&d.y1!==k&&b.moveTo(d.x1+c.x,d.y1+c.y);h&&(f=d["x"+e],g=d["y"+e],i=d["cx"+(e-1)],j=d["cy"+(e-1)],f!==k&&g!==k&&i!==k&&j!==k);)b.quadraticCurveTo(i+c.x,j+c.y,f+c.x,g+c.y),e+=1;e-=1,T(a,b,c,d,d["cx"+(e-1)]+c.x,d["cy"+(e-1)]+c.y,d["x"+e]+c.x,d["y"+e]+c.y)}function W(a,b,c,d){var e,f,g,i,j,l,m,n;for(e=2,f=1,S(a,b,c,d,d.cx1+c.x,d.cy1+c.y,d.x1+c.x,d.y1+c.y),d.x1!==k&&d.y1!==k&&b.moveTo(d.x1+c.x,d.y1+c.y);h&&(g=d["x"+e],i=d["y"+e],j=d["cx"+f],l=d["cy"+f],m=d["cx"+(f+1)],n=d["cy"+(f+1)],g!==k&&i!==k&&j!==k&&l!==k&&m!==k&&n!==k);)b.bezierCurveTo(j+c.x,l+c.y,m+c.x,n+c.y,g+c.x,i+c.y),e+=1,f+=2;e-=1,f-=2,T(a,b,c,d,d["cx"+(f+1)]+c.x,d["cy"+(f+1)]+c.y,d["x"+e]+c.x,d["y"+e]+c.y)}function X(a,b,c){return b*=a._toRad,b-=hb/2,c*lb(b)}function Y(a,b,c){return b*=a._toRad,b-=hb/2,c*kb(b)}function Z(a,b,c,d){var e,f,g,i,j,l,m;for(c===d?j=i=0:(i=c.x,j=c.y),e=1,f=i=l=d.x+i,g=j=m=d.y+j,S(a,b,c,d,f+X(c,d.a1,d.l1),g+Y(c,d.a1,d.l1),f,g),d.x!==k&&d.y!==k&&b.moveTo(f,g);h&&(f=d["a"+e],g=d["l"+e],f!==k&&g!==k);)i=l,j=m,l+=X(c,f,g),m+=Y(c,f,g),b.lineTo(l,m),e+=1;T(a,b,c,d,i,j,l,m)}function $(a,b){isNaN(Number(b.fontSize))||(b.fontSize+="px"),a.font=b.fontStyle+" "+b.fontSize+" "+b.fontFamily}function _(b,c,d,e){var g,h;if(g=qb.propCache,g.text===d.text&&g.fontStyle===d.fontStyle&&g.fontSize===d.fontSize&&g.fontFamily===d.fontFamily&&g.maxWidth===d.maxWidth&&g.lineHeight===d.lineHeight)d.width=g.width,d.height=g.height;else{for(d.width=c.measureText(e[0]).width,h=1;h<e.length;h+=1)g=c.measureText(e[h]).width,g>d.width&&(d.width=g);c=b.style.fontSize,b.style.fontSize=d.fontSize,d.height=f(a.css(b,"fontSize"))*e.length*d.lineHeight,b.style.fontSize=c}}function ab(a,b){var c,d,e,f,g,h=b.maxWidth,i=b.text.split("\n"),j=[];for(e=0;e<i.length;e+=1){if(f=i[e],g=f.split(" "),c=[],d="",1===g.length||a.measureText(f).width<h)c=[f];else{for(f=0;f<g.length;f+=1)a.measureText(d+g[f]).width>h&&(""!==d&&c.push(d),d=""),d+=g[f],f!==g.length-1&&(d+=" ");c.push(d)}j=j.concat(c.join("\n").replace(/( (\n))|( $)/gi,"$2").split("\n"))}return j}var bb,cb,db=a.extend,eb=a.inArray,fb=a.type,gb=a.isFunction,hb=e.PI,ib=e.round,jb=e.abs,kb=e.sin,lb=e.cos,mb=e.atan2,nb=d.prototype.slice,ob=a.event.fix,pb={},qb={dataCache:{},propCache:{},imageCache:{}},rb={rotate:0,scaleX:1,scaleY:1,translateX:0,translateY:0,masks:[]},sb={jCanvas:i},tb={};a.fn.jCanvas=m,m.events={},m.eventHooks={},m.future={inheritance:!1},bb=new function(){db(this,{align:"center",arrowAngle:90,arrowRadius:0,autosave:h,baseline:"middle",bringToFront:i,ccw:i,closed:i,compositing:"source-over",concavity:0,cornerRadius:0,count:1,cropFromCenter:h,cursors:j,disableEvents:i,draggable:i,dragGroups:j,groups:j,data:j,dx:j,dy:j,end:360,eventX:j,eventY:j,fillStyle:"transparent",fontStyle:"normal",fontSize:"12pt",fontFamily:"sans-serif",fromCenter:h,height:j,imageSmoothing:h,inDegrees:h,index:j,lineHeight:1,layer:i,mask:i,maxWidth:j,miterLimit:10,name:j,opacity:1,r1:j,r2:j,radius:0,repeat:"repeat",respectAlign:i,rotate:0,rounded:i,scale:1,scaleX:1,scaleY:1,shadowBlur:0,shadowColor:"transparent",shadowStroke:i,shadowX:0,shadowY:0,sHeight:j,sides:0,source:"",letterSpacing:j,spread:0,start:0,strokeCap:"butt",strokeJoin:"miter",strokeStyle:"transparent",strokeWidth:1,sWidth:j,sx:j,sy:j,text:"",translate:0,translateX:0,translateY:0,type:j,visible:h,width:j,x:0,y:0})},n.prototype=bb,cb=new n,l.prototype=cb,m.extend=function(b){return b.name&&(b.props&&db(bb,b.props),a.fn[b.name]=function c(a){var d,e,f,g;for(e=0;e<this.length;e+=1)d=this[e],(f=p(d))&&(g=new l(a),I(d,g,a,c),t(d,f,g),b.fn.call(d,f,g));return this},b.type&&(pb.drawings[b.type]=b.name)),a.fn[b.name]},a.fn.getEventHooks=function(){var a;return a={},0!==this.length&&(a=this[0],a=A(a),a=a.eventHooks),a},a.fn.setEventHooks=function(b){var c,d;for(c=0;c<this.length;c+=1)a(this[c]),d=A(this[c]),db(d.eventHooks,b);return this},a.fn.getLayers=function(a){var b,c,d,e,f=[];if(0!==this.length)if(b=this[0],c=A(b),c=c.layers,gb(a))for(e=0;e<c.length;e+=1)d=c[e],a.call(b,d)&&f.push(d);else f=c;return f},a.fn.getLayer=function(a){var b,c,d,e;if(0!==this.length)if(b=this[0],c=A(b),b=c.layers,e=fb(a),a&&a.layer)d=a;else if("number"===e)0>a&&(a=b.length+a),d=b[a];else if("regexp"===e){for(c=0;c<b.length;c+=1)if(o(b[c].name)&&b[c].name.match(a)){d=b[c];break}}else d=c.layer.names[a];return d},a.fn.getLayerGroup=function(a){var b,c,d,e=fb(a);if(0!==this.length)if(b=this[0],"array"===e)d=a;else if("regexp"===e){for(c in b=A(b),b=b.layer.groups)if(c.match(a)){d=b[c];break}}else b=A(b),d=b.layer.groups[a];return d},a.fn.getLayerIndex=function(a){var b=this.getLayers();return a=this.getLayer(a),eb(a,b)},a.fn.setLayer=function(b,c){var d,e,g,h,j,k,l;for(e=0;e<this.length;e+=1)if(d=a(this[e]),g=A(this[e]),h=a(this[e]).getLayer(b)){E(d,g,h,c),F(d,g,h,c);for(j in c)c.hasOwnProperty(j)&&(k=c[j],l=fb(k),"object"===l?h[j]=db({},k):"array"===l?h[j]=k.slice(0):"string"===l?0===k.indexOf("+=")?h[j]+=f(k.substr(2)):0===k.indexOf("-=")?h[j]-=f(k.substr(2)):h[j]=k:h[j]=k);B(d,g,h),D(d,g,h),a.isEmptyObject(c)===i&&H(d,g,h,"change",c)}return this},a.fn.setLayers=function(b,c){var d,e,f,g;for(e=0;e<this.length;e+=1)for(d=a(this[e]),f=d.getLayers(c),g=0;g<f.length;g+=1)d.setLayer(f[g],b);return this},a.fn.setLayerGroup=function(b,c){var d,e,f,g;for(e=0;e<this.length;e+=1)if(d=a(this[e]),f=d.getLayerGroup(b))for(g=0;g<f.length;g+=1)d.setLayer(f[g],c);return this},a.fn.moveLayer=function(b,c){var d,e,f,g,h;for(e=0;e<this.length;e+=1)d=a(this[e]),f=A(this[e]),g=f.layers,(h=d.getLayer(b))&&(h.index=eb(h,g),g.splice(h.index,1),g.splice(c,0,h),0>c&&(c=g.length+c),h.index=c,H(d,f,h,"move"));return this},a.fn.removeLayer=function(b){var c,d,e,f,g;for(d=0;d<this.length;d+=1)c=a(this[d]),e=A(this[d]),f=c.getLayers(),(g=c.getLayer(b))&&(g.index=eb(g,f),f.splice(g.index,1),E(c,e,g,{name:j}),F(c,e,g,{groups:j}),H(c,e,g,"remove"));return this},a.fn.removeLayers=function(b){var c,d,e,f,g,h;for(d=0;d<this.length;d+=1){for(c=a(this[d]),e=A(this[d]),f=c.getLayers(b),h=0;h<f.length;h+=1)g=f[h],c.removeLayer(g),h-=1;e.layer.names={},e.layer.groups={}}return this},a.fn.removeLayerGroup=function(b){var c,d,e,f;if(b!==k)for(d=0;d<this.length;d+=1)if(c=a(this[d]),A(this[d]),c.getLayers(),e=c.getLayerGroup(b))for(e=e.slice(0),f=0;f<e.length;f+=1)c.removeLayer(e[f]);return this},a.fn.addLayerToGroup=function(b,c){var d,e,f,g=[c];for(e=0;e<this.length;e+=1)d=a(this[e]),f=d.getLayer(b),f.groups&&(g=f.groups.slice(0),-1===eb(c,f.groups)&&g.push(c)),d.setLayer(f,{groups:g});return this},a.fn.removeLayerFromGroup=function(b,c){var d,e,f,g,h=[];for(e=0;e<this.length;e+=1)d=a(this[e]),f=d.getLayer(b),f.groups&&(g=eb(c,f.groups),-1!==g&&(h=f.groups.slice(0),h.splice(g,1),d.setLayer(f,{groups:h})));return this},tb.cursors=["grab","grabbing","zoom-in","zoom-out"],tb.prefix=function(){var a=getComputedStyle(b.documentElement,"");return"-"+(nb.call(a).join("").match(/-(moz|webkit|ms)-/)||""===a.OLink&&["","o"])[1]+"-"}(),a.fn.triggerLayerEvent=function(b,c){var d,e,f;for(e=0;e<this.length;e+=1)d=a(this[e]),f=A(this[e]),(b=d.getLayer(b))&&H(d,f,b,c);return this},a.fn.drawLayer=function(b){var c,d,e;for(c=0;c<this.length;c+=1)d=a(this[c]),p(this[c]),(e=d.getLayer(b))&&e.visible&&e._method&&(e._next=j,e._method.call(d,e));return this},a.fn.drawLayers=function(b){var c,d,e,f,g,k,l,m,n=db({},b);for(n.index||(n.index=0),c=0;c<this.length;c+=1)if(b=a(this[c]),d=p(this[c])){for(k=A(this[c]),n.clear!==i&&b.clearCanvas(),d=k.layers,g=n.index;g<d.length&&(e=d[g],e.index=g,n.resetFire&&(e._fired=i),l=b,m=e,f=g+1,m&&m.visible&&m._method&&(m._next=f?f:j,m._method.call(l,m)),e._masks=k.transforms.masks.slice(0),e._method!==a.fn.drawImage||!e.visible);g+=1);e=k;var o=f=m=l=void 0;for(l=j,m=e.intersecting.length-1;m>=0;m-=1)if(l=e.intersecting[m],l._masks){for(o=l._masks.length-1;o>=0;o-=1)if(f=l._masks[o],!f.intersects){l.intersects=i;break}if(l.intersects)break}if(e=l,l=k.event,m=l.type,k.drag.layer){f=b;var o=k,r=m,s=void 0,t=void 0,u=void 0,v=u=void 0,w=void 0,u=s=s=u=void 0,u=o.drag,v=(t=u.layer)&&t.dragGroups||[],s=o.layers;if("mousemove"===r||"touchmove"===r){if(u.dragging||(u.dragging=h,t.dragging=h,t.bringToFront&&(s.splice(t.index,1),t.index=s.push(t)),t._startX=t.x,t._startY=t.y,t._endX=t._eventX,t._endY=t._eventY,H(f,o,t,"dragstart")),u.dragging)for(s=t._eventX-(t._endX-t._startX),u=t._eventY-(t._endY-t._startY),t.dx=s-t.x,t.dy=u-t.y,t.x=s,t.y=u,H(f,o,t,"drag"),s=0;s<v.length;s+=1)if(u=v[s],w=o.layer.groups[u],t.groups&&w)for(u=0;u<w.length;u+=1)w[u]!==t&&(w[u].x+=t.dx,w[u].y+=t.dy)}else("mouseup"===r||"touchend"===r)&&(u.dragging&&(t.dragging=i,u.dragging=i,H(f,o,t,"dragstop")),o.drag={})}f=k.lastIntersected,f===j||e===f||!f._hovered||f._fired||k.drag.dragging||(k.lastIntersected=j,f._fired=h,f._hovered=i,H(b,k,f,"mouseout"),b.css({cursor:k.cursor})),e&&(e[m]||pb.mouseEvents[m]&&(m=pb.mouseEvents[m]),e._event&&e.intersects&&(k.lastIntersected=e,!(e.mouseover||e.mouseout||e.cursors)||k.drag.dragging||e._hovered||e._fired||(e._fired=h,e._hovered=h,H(b,k,e,"mouseover")),e._fired||(e._fired=h,l.type=j,H(b,k,e,m)),!e.draggable||e.disableEvents||"mousedown"!==m&&"touchstart"!==m||(k.drag.layer=e))),e!==j||k.drag.dragging||b.css({cursor:k.cursor}),g===d.length&&(k.intersecting.length=0,k.transforms=q(rb),k.savedTransforms.length=0)}return this},a.fn.addLayer=function(a){var b,c;for(b=0;b<this.length;b+=1)(c=p(this[b]))&&(c=new l(a),c.layer=h,I(this[b],c,a));return this},tb.props=["width","height","opacity","lineHeight"],tb.propsObj={},a.fn.animateLayer=function(){function b(a,b,c){return function(){var d,e;for(e=0;e<tb.props.length;e+=1)d=tb.props[e],c[d]=c["_"+d];for(var f in c)c.hasOwnProperty(f)&&-1!==f.indexOf(".")&&delete c[f];b.animating&&b.animated!==c||a.drawLayers(),c._animating=i,b.animating=i,b.animated=j,m[4]&&m[4].call(a[0],c),H(a,b,c,"animateend")}}function c(a,b,c){return function(d,e){var f,g,i=!1;"_"===e.prop[0]&&(i=!0,e.prop=e.prop.replace("_",""),c[e.prop]=c["_"+e.prop]),-1!==e.prop.indexOf(".")&&(f=e.prop.split("."),g=f[0],f=f[1],c[g]&&(c[g][f]=e.now)),c._pos!==e.pos&&(c._pos=e.pos,c._animating||b.animating||(c._animating=h,b.animating=h,b.animated=c),b.animating&&b.animated!==c||a.drawLayers()),m[5]&&m[5].call(a[0],d,e,c),H(a,b,c,"animate",e),i&&(e.prop="_"+e.prop)}}var d,e,f,g,l,m=nb.call(arguments,0);for("object"===fb(m[2])?(m.splice(2,0,m[2].duration||j),m.splice(3,0,m[3].easing||j),m.splice(4,0,m[4].complete||j),m.splice(5,0,m[5].step||j)):(m[2]===k?(m.splice(2,0,j),m.splice(3,0,j),m.splice(4,0,j)):gb(m[2])&&(m.splice(2,0,j),m.splice(3,0,j)),m[3]===k?(m[3]=j,m.splice(4,0,j)):gb(m[3])&&m.splice(3,0,j)),e=0;e<this.length;e+=1)d=a(this[e]),(f=p(this[e]))&&(f=A(this[e]),(g=d.getLayer(m[0]))&&g._method!==a.fn.draw&&(l=db({},m[1]),l=K(this[e],g,l),J(l,h),J(g),g.style=tb.propsObj,a(g).animate(l,{duration:m[2],easing:a.easing[m[3]]?m[3]:j,complete:b(d,f,g),step:c(d,f,g)}),H(d,f,g,"animatestart")));return this},a.fn.animateLayerGroup=function(b){var c,d,e,f,g=nb.call(arguments,0);for(d=0;d<this.length;d+=1)if(c=a(this[d]),e=c.getLayerGroup(b))for(f=0;f<e.length;f+=1)g[0]=e[f],c.animateLayer.apply(c,g);return this},a.fn.delayLayer=function(b,c){var d,e,f,g;for(c=c||0,e=0;e<this.length;e+=1)d=a(this[e]),f=A(this[e]),(g=d.getLayer(b))&&(a(g).delay(c),H(d,f,g,"delay"));return this},a.fn.delayLayerGroup=function(b,c){var d,e,f,g,h;for(c=c||0,e=0;e<this.length;e+=1)if(d=a(this[e]),f=d.getLayerGroup(b))for(h=0;h<f.length;h+=1)g=f[h],d.delayLayer(g,c);return this},a.fn.stopLayer=function(b,c){var d,e,f,g;for(e=0;e<this.length;e+=1)d=a(this[e]),f=A(this[e]),(g=d.getLayer(b))&&(a(g).stop(c),H(d,f,g,"stop"));return this},a.fn.stopLayerGroup=function(b,c){var d,e,f,g,h;for(e=0;e<this.length;e+=1)if(d=a(this[e]),f=d.getLayerGroup(b))for(h=0;h<f.length;h+=1)g=f[h],d.stopLayer(g,c);return this},function(b){var c;for(c=0;c<b.length;c+=1)a.fx.step[b[c]]=M}("color backgroundColor borderColor borderTopColor borderRightColor borderBottomColor borderLeftColor fillStyle outlineColor strokeStyle shadowColor".split(" ")),pb.touchEvents={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},pb.mouseEvents={touchstart:"mousedown",touchend:"mouseup",touchmove:"mousemove"},function(a){var b;for(b=0;b<a.length;b+=1)N(a[b])}("click dblclick mousedown mouseup mousemove mouseover mouseout touchstart touchmove touchend".split(" ")),a.event.fix=function(b){var c,d;return b=ob.call(a.event,b),(c=b.originalEvent)&&(d=c.changedTouches,b.pageX!==k&&b.offsetX===k?(c=a(b.currentTarget).offset())&&(b.offsetX=b.pageX-c.left,b.offsetY=b.pageY-c.top):d&&(c=a(b.currentTarget).offset())&&(b.offsetX=d[0].pageX-c.left,b.offsetY=d[0].pageY-c.top)),b},pb.drawings={arc:"drawArc",bezier:"drawBezier",ellipse:"drawEllipse","function":"draw",image:"drawImage",line:"drawLine",path:"drawPath",polygon:"drawPolygon",slice:"drawSlice",quadratic:"drawQuadratic",rectangle:"drawRect",text:"drawText",vector:"drawVector",save:"saveCanvas",restore:"restoreCanvas",rotate:"rotateCanvas",scale:"scaleCanvas",translate:"translateCanvas"},a.fn.draw=function ub(b){var c,d,e=new l(b);if(pb.drawings[e.type])this[pb.drawings[e.type]](b);else for(c=0;c<this.length;c+=1)a(this[c]),(d=p(this[c]))&&(e=new l(b),I(this[c],e,b,ub),e.visible&&e.fn&&e.fn.call(this[c],d,e));return this},a.fn.clearCanvas=function vb(a){var b,c,d=new l(a);for(b=0;b<this.length;b+=1)(c=p(this[b]))&&(d.width===j||d.height===j?(c.save(),c.setTransform(1,0,0,1,0,0),c.clearRect(0,0,this[b].width,this[b].height),c.restore()):(I(this[b],d,a,vb),z(this[b],c,d,d.width,d.height),c.clearRect(d.x-d.width/2,d.y-d.height/2,d.width,d.height),d._transformed&&c.restore()));return this},a.fn.saveCanvas=function wb(a){var b,c,d,e,f;for(b=0;b<this.length;b+=1)if(c=p(this[b]))for(e=A(this[b]),d=new l(a),I(this[b],d,a,wb),f=0;f<d.count;f+=1)r(c,e);return this},a.fn.restoreCanvas=function xb(a){var b,c,d,e,f;for(b=0;b<this.length;b+=1)if(c=p(this[b]))for(e=A(this[b]),d=new l(a),I(this[b],d,a,xb),f=0;f<d.count;f+=1){var g=c,h=e;0===h.savedTransforms.length?h.transforms=q(rb):(g.restore(),h.transforms=h.savedTransforms.pop())}return this},a.fn.rotateCanvas=function yb(a){var b,c,d,e;for(b=0;b<this.length;b+=1)(c=p(this[b]))&&(e=A(this[b]),d=new l(a),I(this[b],d,a,yb),d.autosave&&r(c,e),w(c,d,e.transforms));return this},a.fn.scaleCanvas=function zb(a){var b,c,d,e;for(b=0;b<this.length;b+=1)(c=p(this[b]))&&(e=A(this[b]),d=new l(a),I(this[b],d,a,zb),d.autosave&&r(c,e),x(c,d,e.transforms));return this},a.fn.translateCanvas=function Ab(a){var b,c,d,e;for(b=0;b<this.length;b+=1)(c=p(this[b]))&&(e=A(this[b]),d=new l(a),I(this[b],d,a,Ab),d.autosave&&r(c,e),y(c,d,e.transforms));return this},a.fn.drawRect=function Bb(a){var b,c,d,e,f,g,j,k,m;for(b=0;b<this.length;b+=1)(c=p(this[b]))&&(d=new l(a),I(this[b],d,a,Bb),d.visible&&(t(this[b],c,d),z(this[b],c,d,d.width,d.height),c.beginPath(),e=d.x-d.width/2,f=d.y-d.height/2,k=jb(d.cornerRadius),d.width&&d.height&&(k?(g=d.x+d.width/2,j=d.y+d.height/2,0>d.width&&(m=e,e=g,g=m),0>d.height&&(m=f,f=j,j=m),0>g-e-2*k&&(k=(g-e)/2),0>j-f-2*k&&(k=(j-f)/2),c.moveTo(e+k,f),c.lineTo(g-k,f),c.arc(g-k,f+k,k,3*hb/2,2*hb,i),c.lineTo(g,j-k),c.arc(g-k,j-k,k,0,hb/2,i),c.lineTo(e+k,j),c.arc(e+k,j-k,k,hb/2,hb,i),c.lineTo(e,f+k),c.arc(e+k,f+k,k,hb,3*hb/2,i),d.closed=h):c.rect(e,f,d.width,d.height)),O(this[b],c,d),v(this[b],c,d)));return this},a.fn.drawArc=function Cb(a){var b,c,d;for(b=0;b<this.length;b+=1)(c=p(this[b]))&&(d=new l(a),I(this[b],d,a,Cb),d.visible&&(t(this[b],c,d),z(this[b],c,d,2*d.radius),c.beginPath(),Q(this[b],c,d,d),O(this[b],c,d),v(this[b],c,d)));return this},a.fn.drawEllipse=function Db(a){var b,c,d,e,f;for(b=0;b<this.length;b+=1)(c=p(this[b]))&&(d=new l(a),I(this[b],d,a,Db),d.visible&&(t(this[b],c,d),z(this[b],c,d,d.width,d.height),e=4/3*d.width,f=d.height,c.beginPath(),c.moveTo(d.x,d.y-f/2),c.bezierCurveTo(d.x-e/2,d.y-f/2,d.x-e/2,d.y+f/2,d.x,d.y+f/2),c.bezierCurveTo(d.x+e/2,d.y+f/2,d.x+e/2,d.y-f/2,d.x,d.y-f/2),O(this[b],c,d),d.closed=h,v(this[b],c,d)));return this},a.fn.drawPolygon=function Eb(a){var b,c,d,e,f,g,i,j,k,m;for(b=0;b<this.length;b+=1)if((c=p(this[b]))&&(d=new l(a),I(this[b],d,a,Eb),d.visible)){for(t(this[b],c,d),z(this[b],c,d,2*d.radius),f=2*hb/d.sides,g=f/2,e=g+hb/2,i=d.radius*lb(g),c.beginPath(),m=0;m<d.sides;m+=1)j=d.x+d.radius*lb(e),k=d.y+d.radius*kb(e),c.lineTo(j,k),d.concavity&&(j=d.x+(i+-i*d.concavity)*lb(e+g),k=d.y+(i+-i*d.concavity)*kb(e+g),c.lineTo(j,k)),e+=f;O(this[b],c,d),d.closed=h,v(this[b],c,d)}return this},a.fn.drawSlice=function Fb(b){var c,d,e,f,g;for(c=0;c<this.length;c+=1)a(this[c]),(d=p(this[c]))&&(e=new l(b),I(this[c],e,b,Fb),e.visible&&(t(this[c],d,e),z(this[c],d,e,2*e.radius),e.start*=e._toRad,e.end*=e._toRad,e.start-=hb/2,e.end-=hb/2,e.start=P(e.start),e.end=P(e.end),e.end<e.start&&(e.end+=2*hb),f=(e.start+e.end)/2,g=e.radius*e.spread*lb(f),f=e.radius*e.spread*kb(f),e.x+=g,e.y+=f,d.beginPath(),d.arc(e.x,e.y,e.radius,e.start,e.end,e.ccw),d.lineTo(e.x,e.y),O(this[c],d,e),e.closed=h,v(this[c],d,e)));return this},a.fn.drawLine=function Gb(a){var b,c,d;for(b=0;b<this.length;b+=1)(c=p(this[b]))&&(d=new l(a),I(this[b],d,a,Gb),d.visible&&(t(this[b],c,d),z(this[b],c,d),c.beginPath(),U(this[b],c,d,d),O(this[b],c,d),v(this[b],c,d)));return this},a.fn.drawQuadratic=function Hb(a){var b,c,d;for(b=0;b<this.length;b+=1)(c=p(this[b]))&&(d=new l(a),I(this[b],d,a,Hb),d.visible&&(t(this[b],c,d),z(this[b],c,d),c.beginPath(),V(this[b],c,d,d),O(this[b],c,d),v(this[b],c,d)));return this},a.fn.drawBezier=function Ib(a){var b,c,d;for(b=0;b<this.length;b+=1)(c=p(this[b]))&&(d=new l(a),I(this[b],d,a,Ib),d.visible&&(t(this[b],c,d),z(this[b],c,d),c.beginPath(),W(this[b],c,d,d),O(this[b],c,d),v(this[b],c,d)));return this},a.fn.drawVector=function Jb(a){var b,c,d;for(b=0;b<this.length;b+=1)(c=p(this[b]))&&(d=new l(a),I(this[b],d,a,Jb),d.visible&&(t(this[b],c,d),z(this[b],c,d),c.beginPath(),Z(this[b],c,d,d),O(this[b],c,d),v(this[b],c,d)));return this},a.fn.drawPath=function Kb(a){var b,c,d,e,f;for(b=0;b<this.length;b+=1)if((c=p(this[b]))&&(d=new l(a),I(this[b],d,a,Kb),d.visible)){for(t(this[b],c,d),z(this[b],c,d),c.beginPath(),e=1;h&&(f=d["p"+e],f!==k);)f=new l(f),"line"===f.type?U(this[b],c,d,f):"quadratic"===f.type?V(this[b],c,d,f):"bezier"===f.type?W(this[b],c,d,f):"vector"===f.type?Z(this[b],c,d,f):"arc"===f.type&&Q(this[b],c,d,f),e+=1;O(this[b],c,d),v(this[b],c,d)}return this},a.fn.drawText=function Lb(b){var c,d,e,g,h,i,k,m,n,o;for(c=0;c<this.length;c+=1)if(a(this[c]),(d=p(this[c]))&&(e=new l(b),g=I(this[c],e,b,Lb),e.visible)){if(t(this[c],d,e),d.textBaseline=e.baseline,d.textAlign=e.align,$(d,e),h=e.maxWidth!==j?ab(d,e):e.text.toString().split("\n"),_(this[c],d,e,h),g&&(g.width=e.width,g.height=e.height),z(this[c],d,e,e.width,e.height),k=e.x,"left"===e.align?e.respectAlign?e.x+=e.width/2:k-=e.width/2:"right"===e.align&&(e.respectAlign?e.x-=e.width/2:k+=e.width/2),e.radius)for(k=f(e.fontSize),e.letterSpacing===j&&(e.letterSpacing=k/500),i=0;i<h.length;i+=1){for(d.save(),d.translate(e.x,e.y),g=h[i],m=g.length,d.rotate(-(hb*e.letterSpacing*(m-1))/2),o=0;m>o;o+=1)n=g[o],0!==o&&d.rotate(hb*e.letterSpacing),d.save(),d.translate(0,-e.radius),d.fillText(n,0,0),d.restore();e.radius-=k,e.letterSpacing+=k/(1e3*hb),d.restore()}else for(i=0;i<h.length;i+=1)g=h[i],m=e.y+i*e.height/h.length-(h.length-1)*e.height/h.length/2,d.shadowColor=e.shadowColor,d.fillText(g,k,m),"transparent"!==e.fillStyle&&(d.shadowColor="transparent"),d.strokeText(g,k,m);m=0,"top"===e.baseline?m+=e.height/2:"bottom"===e.baseline&&(m-=e.height/2),e._event&&(d.beginPath(),d.rect(e.x-e.width/2,e.y-e.height/2+m,e.width,e.height),O(this[c],d,e),d.closePath()),e._transformed&&d.restore()}return qb.propCache=e,this},a.fn.measureText=function(a){var b,c;return b=this.getLayer(a),(!b||b&&!b._layer)&&(b=new l(a)),(a=p(this[0]))&&($(a,b),c=ab(a,b),_(this[0],a,b,c)),b},a.fn.drawImage=function Mb(b){function d(b,c,d,e,f){return function(){var g=a(b);t(b,c,e),e.width===j&&e.sWidth===j&&(e.width=e.sWidth=q.width),e.height===j&&e.sHeight===j&&(e.height=e.sHeight=q.height),f&&(f.width=e.width,f.height=e.height),e.sWidth!==j&&e.sHeight!==j&&e.sx!==j&&e.sy!==j?(e.width===j&&(e.width=e.sWidth),e.height===j&&(e.height=e.sHeight),e.cropFromCenter||(e.sx+=e.sWidth/2,e.sy+=e.sHeight/2),0>e.sy-e.sHeight/2&&(e.sy=e.sHeight/2),e.sy+e.sHeight/2>q.height&&(e.sy=q.height-e.sHeight/2),0>e.sx-e.sWidth/2&&(e.sx=e.sWidth/2),e.sx+e.sWidth/2>q.width&&(e.sx=q.width-e.sWidth/2),z(b,c,e,e.width,e.height),c.drawImage(q,e.sx-e.sWidth/2,e.sy-e.sHeight/2,e.sWidth,e.sHeight,e.x-e.width/2,e.y-e.height/2,e.width,e.height)):(z(b,c,e,e.width,e.height),c.drawImage(q,e.x-e.width/2,e.y-e.height/2,e.width,e.height)),c.beginPath(),c.rect(e.x-e.width/2,e.y-e.height/2,e.width,e.height),O(b,c,e),c.closePath(),e._transformed&&c.restore(),u(c,d,e),e.layer?H(g,d,f,"load"):e.load&&e.load.call(g[0],f),e.layer&&(f._masks=d.transforms.masks.slice(0),e._next&&g.drawLayers({clear:i,resetFire:h,index:e._next}))}}var e,f,g,m,n,o,q,r,s,v=qb.imageCache;for(f=0;f<this.length;f+=1)e=this[f],(g=p(this[f]))&&(m=A(this[f]),n=new l(b),o=I(this[f],n,b,Mb),n.visible&&(s=n.source,r=s.getContext,s.src||r?q=s:s&&(v[s]!==k?q=v[s]:(q=new c,q.src=s,v[s]=q)),q&&(q.complete||r?d(e,g,m,n,o)():(q.onload=d(e,g,m,n,o),q.src=q.src))));return this},a.fn.createPattern=function(b){function d(){h=e.createPattern(g,f.repeat),f.load&&f.load.call(k[0],h)}var e,f,g,h,i,k=this;return(e=p(k[0]))?(f=new l(b),i=f.source,gb(i)?(g=a("<canvas />")[0],g.width=f.width,g.height=f.height,b=p(g),i.call(g,b),d()):(b=i.getContext,i.src||b?g=i:(g=new c,g.src=i),g.complete||b?d():(a(g).bind("load",d),g.src=g.src))):h=j,h},a.fn.createGradient=function(a){var b,c,d,e,f,g,h,i,m=[];if(a=new l(a),b=p(this[0])){for(a.x1=a.x1||0,a.y1=a.y1||0,a.x2=a.x2||0,a.y2=a.y2||0,b=a.r1!==j&&a.r2!==j?b.createRadialGradient(a.x1,a.y1,a.r1,a.x2,a.y2,a.r2):b.createLinearGradient(a.x1,a.y1,a.x2,a.y2),f=1;a["c"+f]!==k;f+=1)m.push(a["s"+f]!==k?a["s"+f]:j);for(c=m.length,m[0]===j&&(m[0]=0),m[c-1]===j&&(m[c-1]=1),f=0;c>f;f+=1){if(m[f]!==j){for(h=1,i=0,d=m[f],g=f+1;c>g;g+=1){if(m[g]!==j){e=m[g];break}h+=1}d>e&&(m[g]=m[f])}else m[f]===j&&(i+=1,m[f]=d+(e-d)/h*i);b.addColorStop(m[f],a["c"+(f+1)])}}else b=j;return b},a.fn.setPixels=function Nb(a){var b,c,d,e,f,g,h,i,k;for(c=0;c<this.length;c+=1)if(b=this[c],(d=p(b))&&(e=new l(a),I(b,e,a,Nb),z(this[c],d,e,e.width,e.height),(e.width===j||e.height===j)&&(e.width=b.width,e.height=b.height,e.x=e.width/2,e.y=e.height/2),0!==e.width&&0!==e.height)){if(g=d.getImageData(e.x-e.width/2,e.y-e.height/2,e.width,e.height),h=g.data,k=h.length,e.each)for(i=0;k>i;i+=4)f={r:h[i],g:h[i+1],b:h[i+2],a:h[i+3]},e.each.call(b,f,e),h[i]=f.r,h[i+1]=f.g,h[i+2]=f.b,h[i+3]=f.a;d.putImageData(g,e.x-e.width/2,e.y-e.height/2),d.restore()}return this},a.fn.getCanvasImage=function(a,b){var c,d=j;return 0!==this.length&&(c=this[0],c.toDataURL&&(b===k&&(b=1),d=c.toDataURL("image/"+a,b))),d},a.fn.detectPixelRatio=function(b){var c,d,e,f,g,i,j;for(d=0;d<this.length;d+=1)c=this[d],a(this[d]),e=p(c),j=A(this[d]),j.scaled||(f=window.devicePixelRatio||1,g=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,f/=g,1!==f&&(g=c.width,i=c.height,c.width=g*f,c.height=i*f,c.style.width=g+"px",c.style.height=i+"px",e.scale(f,f)),j.pixelRatio=f,j.scaled=h,b&&b.call(c,f));return this},m.clearCache=function(){for(var a in qb)qb.hasOwnProperty(a)&&(qb[a]={})},a.support.canvas=a("<canvas />")[0].getContext!==k,m.defaults=bb,m.prefs=cb,m.setGlobalProps=t,m.transformShape=z,m.detectEvents=O,m.closePath=v,a.jCanvas=m}(jQuery,document,Image,Array,Math,parseFloat,console,!0,!1,null);